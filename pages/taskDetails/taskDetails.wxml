<view class="list-item flex-wrap">
  <view class="flex-wrap list-item-user flex-1">
    <view class="flex-1">
      <image src="{{item.user.hurl}}" class="icon" data-hurl="{{item.user.hurl}}" bind:tap="lookImages" />
    </view>
    <view class="user-content flex-wrap flex-3">
      <view class="user-content-top flex-wrap">
        <text class="top-userName">{{item.user.wxname}}</text>
        <image src="/images/man.png" class="user-sex" />
      </view>
      <view class="user-content-bottom flex-wrap">
        <text class="user-bottom-time flex-1">{{item.time}}</text>
        <text class="user-bottom-school flex-1">{{item.user.school}}20{{item.user.grade}}级</text>
      </view>
    </view>
    <view class="task-more-wrap">
      <image src="/images/more.png" class="flex-1 task-more" data-status="{{item.status}}" data-identity="{{user.id==item.taskPublisher}}" bind:tap="more"></image>
    </view>
  </view>
  <block wx:if="{{item.taskType==2}}">
    <view class="flex-wrap imagesContext" catch:tap="lookContentImage" data-contentImages="{{item.images}}">
      <block wx:for="{{item.images}}" wx:key="index">
        <image src="{{item}}" class="imagesItem" bind:tap="imagesItem" data-imagesItem="{{item}}" />
      </block>
    </view>
  </block>
  <view class="flex-wrap list-item-task flex-2">
    <view class="task-title flex-wrap flex-1">
      <text class="">{{item.title}}</text>
      <text class="task-title-reward">￥ {{item.taskReward/100}}</text>
    </view>
    <block wx:if="{{item.taskType==1}}">
      <block wx:for="{{item.express}}" wx:key="{{index}}">
        <view class="task-text takeaddress flex-1 flex-wrap">
          <text class="takeaddress-title">取件地点</text>
          <text class="takeaddress-content task-content">{{item.takeaddress}}</text>
        </view>
        <view class="task-text targetaddress flex-1 flex-wrap">
          <text class="targetaddress-title">送达地点</text>
          <text class="targetaddress-content task-content">{{item.targetaddress}}</text>
        </view>
      </block>
      <view class="task-text targetaddress flex-1 flex-wrap">
        <text class="targetaddress-title">备注</text>
        <text class="targetaddress-content task-content-remarks">{{item.remarks}}</text>
      </view>
    </block>
    <block wx:if="{{item.taskType==2}}">
      <view class="task-text takeaddress flex-wrap">
        <text class="content-title">内容:</text>
        <text class="takeaddress-content flex-1">{{item.taskContext}}</text>
      </view>
    </block>
  </view>
  <view class="flex-1">
    <view class="flex-wrap taskStatus">
      <text class="flex-1 taskStatus-title">任务状态</text>
      <block wx:if="{{item.status==1}}">
        <view class="flex-1 tatus-wrap">
          <image src="/images/statusPublication.png" class="task-status"></image>
        </view>
      </block>
      <block wx:if="{{item.status==2}}">
        <view class="flex-1 tatus-wrap">
          <image src="/images/statusAccepted.png" class="task-status"></image>
        </view>
      </block>
      <block wx:if="{{item.status==3}}">
        <view class="flex-1 tatus-wrap">
          <image src="/images/statusComplete.png" class="task-status"></image>
        </view>
      </block>
      <block wx:if="{{item.status==4}}">
        <view class="flex-1 tatus-wrap">
          <image src="/images/statusSettled.png" class="task-status"></image>
        </view>
      </block>
      <block wx:if="{{item.status==5}}">
        <view class="flex-1 tatus-wrap">
          <image src="/images/statusPublication.png" class="task-status"></image>
        </view>
      </block>
    </view>
  </view>
  <block wx:if="{{item.taskPublisher!=user.id}}">
    <block wx:if="{{item.status==1}}">
      <view class="flex-1">
        <view class="flex-wrap detailsButton">
          <button class="button-style flex-1" bind:tap="receipt" data-taskid="{{item.taskId}}" data-taskReward="{{item.taskReward}}">
            接单
          </button>
        </view>
      </view>
    </block>
    <block wx:if="{{item.status==2}}">
      <view class="flex-1">
        <view class="flex-wrap detailsButton">
          <button class="button-style flex-1" bind:tap="finish" data-orderId="{{item.orderId}}" data-taskid="{{item.taskId}}" data-status="{{item.status}}">
            完成任务
          </button>
        </view>
      </view>
    </block>
  </block>
  <block wx:if="{{item.taskPublisher==user.id}}">
   <block wx:if="{{item.status==3}}">
      <view class="flex-1">
        <view class="flex-wrap detailsButton">
          <button class="button-style flex-1" bind:tap="confirm" data-taskid="{{item.taskId}}" data-status="{{item.status}}">
            确认完成
          </button>
        </view>
      </view>
    </block>
  </block>
</view>